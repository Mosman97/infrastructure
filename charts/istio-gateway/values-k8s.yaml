gateway:
  enabled: true
  
  servers:
    - port:
        number: 80
        name: http
        protocol: HTTP
      hosts:
        - "*.yourdomain.com"
      tls:
        httpsRedirect: true
    
    - port:
        number: 443
        name: https
        protocol: HTTPS
      hosts:
        - "*.yourdomain.com"
      tls:
        mode: SIMPLE
        credentialName: wildcard-tls-cert
        minProtocolVersion: TLSV1_2
        maxProtocolVersion: TLSV1_3
        cipherSuites:
          - ECDHE-ECDSA-AES128-GCM-SHA256
          - ECDHE-RSA-AES128-GCM-SHA256
          - ECDHE-ECDSA-AES256-GCM-SHA384
          - ECDHE-RSA-AES256-GCM-SHA384

  service:
    type: LoadBalancer
    ports:
      - name: http
        port: 80
        targetPort: 8080
        protocol: TCP
      - name: https
        port: 443
        targetPort: 8443
        protocol: TCP
    
    externalTrafficPolicy: Local

  replicas: 2
  
  resources:
    requests:
      memory: "512Mi"
      cpu: "500m"
    limits:
      memory: "1Gi"
      cpu: "1"
  
  podDisruptionBudget:
    enabled: true
    minAvailable: 1
  
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 80

virtualServices:
  keycloak:
    enabled: true
    host: "keycloak.yourdomain.com"
    destination:
      host: keycloak-service.iam-system.svc.cluster.local
      port: 8080
  
  grafana:
    enabled: true
    host: "grafana.yourdomain.com"
    destination:
      host: observability-stack-grafana.observability-system.svc.cluster.local
      port: 80
